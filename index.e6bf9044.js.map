{"mappings":"AAAA,MAGMA,EAAkBC,SAASC,cAAc,0BACzCC,EAAcF,SAASG,eAAe,mBAC5C,IAAIC,EAAY,GAehB,SAASC,EAAcC,GAMrB,OAJEA,EAAMC,OAAOC,MAAKC,GAAqB,QAAdA,EAAIC,SAC7BJ,EAAMC,OAAOC,MAAKC,GAAqB,QAAdA,EAAIC,SAC7BJ,EAAMC,OAAO,IAEJI,G,CAGb,SAASC,EAAaC,EAAS,IAC7B,IAAKA,EAAOC,OAGV,YAFAf,EAAgBgB,UACd,kDAIJ,MAAMC,EAASH,EACZI,KACCX,GAAS,uCAAuCD,EAAcC,+DAAmEA,EAAMY,iCAAiCZ,EAAMa,MAAMC,MAAMC,uBAE3LC,KAAK,IAERvB,EAAgBgB,UAAYC,C,CA2B1Bd,GACFA,EAAYqB,iBAAiB,SAASC,KAzBxC,SAAyBC,GACvB,IAAKA,EAEH,YADAb,EAAaR,GAGf,MAAMsB,EAAID,EAAME,OAAOC,cAMvBhB,EALiBR,EAAUyB,QAAOC,IAChC,MAAMZ,GAAQY,EAAGZ,MAAQ,IAAIU,cACvBG,GAAQD,EAAGX,OAASW,EAAGX,MAAMC,OAASU,EAAGX,MAAMC,MAAMC,UAAYS,EAAGX,MAAMC,MAAMC,UAAY,IAAIO,cACtG,OAAOV,EAAKc,SAASN,IAAMK,EAAKC,SAASN,EAAE,I,CAiB3CO,CAAgBT,EAAEU,OAAOC,MAAM,IAZnCC,iBACE,MAAMC,QArDRD,iBACE,IACE,MAAME,QAAiBC,MAAM,yGAC7B,IAAKD,EAASE,GACZ,MAAM,IAAIC,MAAM,cAAcH,EAASI,UAGzC,aADmBJ,EAASK,M,CAE5B,MAAOC,GACPC,QAAQD,MAAMA,E,EA4CGE,GACbjC,EACJwB,GAAQA,EAAKU,WAAaV,EAAKU,UAAUlC,OAASwB,EAAKU,UAAUlC,OAAS,GAC5ET,EAAYS,EACZgC,QAAQG,IAAI5C,GACZQ,EAAaR,GACbC,EAAcQ,E,CAShBoC","sources":["src/index.js"],"sourcesContent":["const API_KEY = 'PGVpj5B2ke0spXMDy1QJDYveXLa7zjEE';\nconst BASE_URL = 'https://app.ticketmaster.com/discovery/v2/events.json';\n\nconst eventsContainer = document.querySelector('.main-events-container');\nconst searchInput = document.getElementById('heroInputSearch');\nlet allEvents = [];\n\nasync function getEvents() {\n  try {\n    const response = await fetch(`${BASE_URL}?apikey=${API_KEY}&size=20`);\n    if (!response.ok) {\n      throw new Error(`HTTP error ${response.status}`);\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nfunction getEventImage(event) {\n  const img =\n    event.images.find(img => img.ratio === '4_3') ||\n    event.images.find(img => img.ratio === '3_2') ||\n    event.images[0];\n\n  return img.url;\n}\n\nfunction renderEvents(events = []) {\n  if (!events.length) {\n    eventsContainer.innerHTML =\n      '<li class=\"event-element\">No events found</li>';\n    return;\n  }\n\n  const markup = events\n    .map(\n      event => `<li class=\"event-element\"><img src=\"${getEventImage(event)}\" width=\"200px\" class=\"event-image\"><p class=\"event-name\">${event.name}</p><p class=\"event-time\">${event.dates.start.localDate}</p></li>`\n    )\n    .join('');\n\n  eventsContainer.innerHTML = markup;\n}\n\nfunction filterAndRender(query) {\n  if (!query) {\n    renderEvents(allEvents);\n    return;\n  }\n  const q = query.trim().toLowerCase();\n  const filtered = allEvents.filter(ev => {\n    const name = (ev.name || '').toLowerCase();\n    const date = (ev.dates && ev.dates.start && ev.dates.start.localDate ? ev.dates.start.localDate : '').toLowerCase();\n    return name.includes(q) || date.includes(q);\n  });\n  renderEvents(filtered);\n}\n\nasync function startApp() {\n  const data = await getEvents();\n  const events =\n    data && data._embedded && data._embedded.events ? data._embedded.events : [];\n  allEvents = events;\n  console.log(allEvents);\n  renderEvents(allEvents);\n  getEventImage(events);\n}\n\nif (searchInput) {\n  searchInput.addEventListener('input', e => {\n    filterAndRender(e.target.value);\n  });\n}\n\nstartApp();\n"],"names":["$1f0dc3b9307be026$var$eventsContainer","document","querySelector","$1f0dc3b9307be026$var$searchInput","getElementById","$1f0dc3b9307be026$var$allEvents","$1f0dc3b9307be026$var$getEventImage","event","images","find","img","ratio","url","$1f0dc3b9307be026$var$renderEvents","events","length","innerHTML","markup","map","name","dates","start","localDate","join","addEventListener","e","query","q","trim","toLowerCase","filter","ev","date","includes","$1f0dc3b9307be026$var$filterAndRender","target","value","async","data","response","fetch","ok","Error","status","json","error","console","$1f0dc3b9307be026$var$getEvents","_embedded","log","$1f0dc3b9307be026$var$startApp"],"version":3,"file":"index.e6bf9044.js.map"}