{"mappings":"AAOA,MAGMA,EAAkBC,SAASC,cAAc,0BACzCC,EAAsBF,SAASC,cAAc,yBAC7CE,EAAcH,SAASI,eAAe,mBAKtCC,GAHeL,SAASI,eAAe,kBACtBJ,SAASC,cAAc,oBAExBD,SAASC,cAAc,oBACvCK,EAAWN,SAASC,cAAc,oBAExC,IAAIM,EAAY,GACZC,EAAO,EAEX,IAAIC,EAAQ,GAuHZC,eAAeC,IACb,MAAMC,QAhGRF,iBACE,IAAIG,EAAM,+GAAmDL,EAAO,GAEhEC,IACFI,GAAO,YAAYJ,KAGrB,MAAMK,QAAiBC,MAAMF,GAE7B,aADmBC,EAASE,M,CAwFTC,GAEbC,EACJN,GAAQA,EAAKO,WAAaP,EAAKO,UAAUD,OACrCN,EAAKO,UAAUD,OACf,GAEAE,EACJR,EAAKS,MAAQT,EAAKS,KAAKD,WAAaR,EAAKS,KAAKD,WAAa,EAE7Db,EAAYW,EArFd,SAAsBA,EAAS,IAC7B,IAAKA,EAAOI,OAGV,YAFAvB,EAAgBwB,UACd,kDAIJ,MAAMC,EAASN,EACZO,KACCC,GACE,sCAAsCA,EAAMC,kFAnBpD,SAAuBD,GAMrB,OAJEA,EAAME,OAAOC,MAAKC,GAAqB,QAAdA,EAAIC,SAC7BL,EAAME,OAAOC,MAAKC,GAAqB,QAAdA,EAAIC,SAC7BL,EAAME,OAAO,IAEJf,G,CAeSmB,CAAcN,yHAEFA,EAAMO,+CACJP,EAAMQ,MAAMC,MAAMC,oDAClBV,EAAMP,UAAUkB,OAAO,GAAGJ,8CAIzDK,KAAK,IAERvC,EAAgBwB,UAAYC,C,CAgE5Be,CAAahC,GA7Df,SAA0Ba,GACxBlB,EAAoBqB,UAAY,GAEhC,MAAMiB,EAAUxC,SAASyC,cAAc,UACvCD,EAAQE,YAAc,OACtBF,EAAQG,UAAY,iBACpBH,EAAQI,SAAoB,IAATpC,EACnBgC,EAAQK,QAAU,KAChBrC,IACAG,GAAU,EAEZT,EAAoB4C,YAAYN,GAEhC,IAAK,IAAIO,EAAI,EAAGA,GAAK3B,EAAY2B,IAAK,CACpC,GAAIA,EAAIvC,EAAO,GAAKuC,EAAIvC,EAAO,EAAG,SAElC,MAAMwC,EAAMhD,SAASyC,cAAc,UACnCO,EAAIN,YAAcK,EAClBC,EAAIL,UAAY,iBAEZI,IAAMvC,GACRwC,EAAIC,UAAUC,IAAI,UAGpBF,EAAIH,QAAU,KACZrC,EAAOuC,EACPpC,GAAU,EAGZT,EAAoB4C,YAAYE,E,CAGlC,MAAMG,EAAUnD,SAASyC,cAAc,UACvCU,EAAQT,YAAc,OACtBS,EAAQR,UAAY,iBACpBQ,EAAQP,SAAWpC,IAASY,EAC5B+B,EAAQN,QAAU,KAChBrC,IACAG,GAAU,EAEZT,EAAoB4C,YAAYK,E,CAsBhCC,CAAiBhC,GACjBiC,OAAOC,SAAS,EAAG,E,CAgBrB,SAASC,IACPlD,EAAc4C,UAAUO,OAAO,Y,CAd7BrD,GACFA,EAAYsD,iBAAiB,SAASC,IAxBxC,IAAyBC,IAyBLD,EAAEE,OAAOD,MAxB3BlD,EAAQkD,EACRnD,EAAO,EACPG,GAsBiC,IAInCZ,EAAgB0D,iBAAiB,SAASC,IAC3BA,EAAEE,OAAOC,QAAQ,mBAG9BN,GAAa,IAOfjD,EAASmD,iBAAiB,QAASF,GACnClD,EAAcoD,iBAAiB,SAASC,IAClCA,EAAEE,SAAWF,EAAEI,eAAeP,GAAa,IAGjD5C","sources":["src/index.js"],"sourcesContent":["let countries = [];\n\nasync function loadCountries() {\n  const res = await fetch('./countries.json');\n  countries = await res.json();\n}\n\nconst API_KEY = 'PGVpj5B2ke0spXMDy1QJDYveXLa7zjEE';\nconst BASE_URL = 'https://app.ticketmaster.com/discovery/v2/events.json';\n\nconst eventsContainer = document.querySelector('.main-events-container');\nconst paginationContainer = document.querySelector('.pagination-container');\nconst searchInput = document.getElementById('heroInputSearch');\n\nconst countriesBtn = document.getElementById('heroBtnCountry');\nconst countriesBlock = document.querySelector('.countries-block');\n\nconst modalBackdrop = document.querySelector('.modal-backdrop');\nconst closeBtn = document.querySelector('.btn-modal-close');\n\nlet allEvents = [];\nlet page = 1;\nconst size = 20;\nlet query = '';\n\n// function handleBtnClick() {\n//   countriesBlock.classList.toggle('is-open');\n//   if (!countriesBlock.classList.contains('is-open')) return;\n\n//   countriesBlock.innerHTML = '';\n\n//   countries.forEach(country => {\n//     const countryItem = document.createElement('div');\n//     countryItem.textContent = country.name;\n//     countryItem.classList.add('country-item');\n\n//     countryItem.addEventListener('click', () => {\n//       countriesBtn.textContent = country.name;\n//       countriesBlock.classList.remove('is-open');\n//     });\n\n//     countriesBlock.appendChild(countryItem);\n//   });\n// }\n\n// countriesBtn.addEventListener('click', handleBtnClick);\n\nasync function getEvents() {\n  let url = `${BASE_URL}?apikey=${API_KEY}&size=${size}&page=${page - 1}`;\n\n  if (query) {\n    url += `&keyword=${query}`;\n  }\n\n  const response = await fetch(url);\n  const data = await response.json();\n  return data;\n}\n\nfunction getEventImage(event) {\n  const img =\n    event.images.find(img => img.ratio === '4_3') ||\n    event.images.find(img => img.ratio === '3_2') ||\n    event.images[0];\n\n  return img.url;\n}\n\nfunction renderEvents(events = []) {\n  if (!events.length) {\n    eventsContainer.innerHTML =\n      '<li class=\"event-element\">No events found</li>';\n    return;\n  }\n\n  const markup = events\n    .map(\n      event =>\n        `<li class=\"event-element\" data-id=\"${event.id}\">\n          <div class=\"event-card-background\"></div>\n          <img src=\"${getEventImage(event)}\" width=\"280px\" class=\"event-image\">\n          <div class=\"event-text-container\">\n          <p class=\"event-name\">${event.name}</p>\n            <p class=\"event-time\">${event.dates.start.localDate}</p>\n            <p class=\"event-area\">${event._embedded.venues[0].name}</p>\n          </div>\n        </li>`\n    )\n    .join('');\n\n  eventsContainer.innerHTML = markup;\n}\n\nfunction renderPagination(totalPages) {\n  paginationContainer.innerHTML = '';\n\n  const prevBtn = document.createElement('button');\n  prevBtn.textContent = 'Prev';\n  prevBtn.className = 'pagination-btn';\n  prevBtn.disabled = page === 1;\n  prevBtn.onclick = () => {\n    page--;\n    startApp();\n  };\n  paginationContainer.appendChild(prevBtn);\n\n  for (let i = 1; i <= totalPages; i++) {\n    if (i < page - 2 || i > page + 2) continue;\n\n    const btn = document.createElement('button');\n    btn.textContent = i;\n    btn.className = 'pagination-btn';\n\n    if (i === page) {\n      btn.classList.add('active');\n    }\n\n    btn.onclick = () => {\n      page = i;\n      startApp();\n    };\n\n    paginationContainer.appendChild(btn);\n  }\n\n  const nextBtn = document.createElement('button');\n  nextBtn.textContent = 'Next';\n  nextBtn.className = 'pagination-btn';\n  nextBtn.disabled = page === totalPages;\n  nextBtn.onclick = () => {\n    page++;\n    startApp();\n  };\n  paginationContainer.appendChild(nextBtn);\n}\n\nfunction filterAndRender(value) {\n  query = value;\n  page = 1;\n  startApp();\n}\n\nasync function startApp() {\n  const data = await getEvents();\n\n  const events =\n    data && data._embedded && data._embedded.events\n      ? data._embedded.events\n      : [];\n\n  const totalPages =\n    data.page && data.page.totalPages ? data.page.totalPages : 1;\n\n  allEvents = events;\n  renderEvents(allEvents);\n  renderPagination(totalPages);\n  window.scrollTo(0, 0);\n}\n\nif (searchInput) {\n  searchInput.addEventListener('input', e => {\n    filterAndRender(e.target.value);\n  });\n}\n\neventsContainer.addEventListener('click', e => {\n  const card = e.target.closest('.event-element');\n  if (!card) return;\n\n  toggleModal();\n});\n\nfunction toggleModal() {\n  modalBackdrop.classList.toggle('is-hidden');\n}\n\ncloseBtn.addEventListener('click', toggleModal);\nmodalBackdrop.addEventListener('click', e => {\n  if (e.target === e.currentTarget) toggleModal();\n});\n\nstartApp();\n"],"names":["$1f0dc3b9307be026$var$eventsContainer","document","querySelector","$1f0dc3b9307be026$var$paginationContainer","$1f0dc3b9307be026$var$searchInput","getElementById","$1f0dc3b9307be026$var$modalBackdrop","$1f0dc3b9307be026$var$closeBtn","$1f0dc3b9307be026$var$allEvents","$1f0dc3b9307be026$var$page","$1f0dc3b9307be026$var$query","async","$1f0dc3b9307be026$var$startApp","data","url","response","fetch","json","$1f0dc3b9307be026$var$getEvents","events","_embedded","totalPages","page","length","innerHTML","markup","map","event","id","images","find","img","ratio","$1f0dc3b9307be026$var$getEventImage","name","dates","start","localDate","venues","join","$1f0dc3b9307be026$var$renderEvents","prevBtn","createElement","textContent","className","disabled","onclick","appendChild","i","btn","classList","add","nextBtn","$1f0dc3b9307be026$var$renderPagination","window","scrollTo","$1f0dc3b9307be026$var$toggleModal","toggle","addEventListener","e","value","target","closest","currentTarget"],"version":3,"file":"index.9f923d35.js.map"}